{"version":3,"file":"agm-js-marker-clusterer.js","sources":["ng:/@agm/js-marker-clusterer/services/managers/cluster-manager.ts","ng:/@agm/js-marker-clusterer/directives/marker-cluster.ts","ng:/@agm/js-marker-clusterer/js-marker-clusterer.module.ts","ng:/@agm/js-marker-clusterer/index.ts","ng:/@agm/js-marker-clusterer/agm-js-marker-clusterer.ts"],"names":["tslib_1.__decorate"],"mappings":"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","sourcesContent":["import { Injectable, NgZone } from '@angular/core';\nimport { Observable, Observer } from 'rxjs';\n\nimport 'js-marker-clusterer';\n\nimport { AgmMarker, GoogleMapsAPIWrapper, MarkerManager } from '@agm/core';\nimport { Marker } from '@agm/core/services/google-maps-types';\nimport { AgmMarkerCluster } from '../../directives/marker-cluster';\nimport { ClusterOptions, MarkerClustererInstance } from '../google-clusterer-types';\n\ndeclare var MarkerClusterer: any;\n\n@Injectable()\nexport class ClusterManager extends MarkerManager {\n  private _clustererInstance: Promise<MarkerClustererInstance>;\n  private _resolver: Function;\n\n  constructor(protected _mapsWrapper: GoogleMapsAPIWrapper, protected _zone: NgZone) {\n    super(_mapsWrapper, _zone);\n    this._clustererInstance = new Promise<MarkerClustererInstance>((resolver) => {\n      this._resolver = resolver;\n    });\n  }\n\n  init(options: ClusterOptions): void {\n    this._mapsWrapper.getNativeMap().then(map => {\n      const clusterer = new MarkerClusterer(map, [], options);\n      this._resolver(clusterer);\n    });\n  }\n\n  getClustererInstance(): Promise<MarkerClustererInstance> {\n    return this._clustererInstance;\n  }\n\n  addMarker(marker: AgmMarker): void {\n    const clusterPromise: Promise<MarkerClustererInstance> = this.getClustererInstance();\n    const markerPromise = this._mapsWrapper\n      .createMarker({\n        position: {\n          lat: marker.latitude,\n          lng: marker.longitude,\n        },\n        label: marker.label,\n        draggable: marker.draggable,\n        icon: marker.iconUrl,\n        opacity: marker.opacity,\n        visible: marker.visible,\n        zIndex: marker.zIndex,\n        title: marker.title,\n        clickable: marker.clickable,\n      }, false);\n\n    Promise\n      .all([clusterPromise, markerPromise])\n      .then(([cluster, marker]) => {\n        return cluster.addMarker(marker);\n      });\n    this._markers.set(marker, markerPromise);\n  }\n\n  deleteMarker(marker: AgmMarker): Promise<void> {\n    const m = this._markers.get(marker);\n    if (m == null) {\n      // marker already deleted\n      return Promise.resolve();\n    }\n    return m.then((m: Marker) => {\n      this._zone.run(() => {\n        m.setMap(null);\n        this.getClustererInstance().then(cluster => {\n          cluster.removeMarker(m);\n          this._markers.delete(marker);\n        });\n      });\n    });\n  }\n\n  clearMarkers(): Promise<void> {\n    return this.getClustererInstance().then(cluster => {\n      cluster.clearMarkers();\n    });\n  }\n\n  setGridSize(c: AgmMarkerCluster): void {\n    this.getClustererInstance().then(cluster => {\n      cluster.setGridSize(c.gridSize);\n    });\n  }\n\n  setMaxZoom(c: AgmMarkerCluster): void {\n    this.getClustererInstance().then(cluster => {\n      cluster.setMaxZoom(c.maxZoom);\n    });\n  }\n\n  setStyles(c: AgmMarkerCluster): void {\n    this.getClustererInstance().then(cluster => {\n      cluster.setStyles(c.styles);\n    });\n  }\n\n  setZoomOnClick(c: AgmMarkerCluster): void {\n    this.getClustererInstance().then(cluster => {\n      if (c.zoomOnClick !== undefined) {\n        cluster.zoomOnClick_ = c.zoomOnClick;\n      }\n    });\n  }\n\n  setAverageCenter(c: AgmMarkerCluster): void {\n    this.getClustererInstance().then(cluster => {\n      if (c.averageCenter !== undefined) {\n        cluster.averageCenter_ = c.averageCenter;\n      }\n    });\n  }\n\n  setImagePath(c: AgmMarkerCluster): void {\n    this.getClustererInstance().then(cluster => {\n      if (c.imagePath !== undefined) {\n        cluster.imagePath_ = c.imagePath;\n      }\n    });\n  }\n\n  setMinimumClusterSize(c: AgmMarkerCluster): void {\n    this.getClustererInstance().then(cluster => {\n      if (c.minimumClusterSize !== undefined) {\n        cluster.minimumClusterSize_ = c.minimumClusterSize;\n      }\n    });\n  }\n\n  setImageExtension(c: AgmMarkerCluster): void {\n    this.getClustererInstance().then(cluster => {\n      if (c.imageExtension !== undefined) {\n        cluster.imageExtension_ = c.imageExtension;\n      }\n    });\n  }\n\n  createClusterEventObservable<T>(eventName: string): Observable<T> {\n    return Observable.create((observer: Observer<T>) => {\n      this._zone.runOutsideAngular(() => {\n        this._clustererInstance.then((m: MarkerClustererInstance) => {\n          m.addListener(eventName, (e: T) => this._zone.run(() => observer.next(e)));\n        });\n      });\n    });\n  }\n\n  setCalculator (c: AgmMarkerCluster): void {\n    this.getClustererInstance().then(cluster => {\n      if (typeof c.calculator === 'function') {\n        cluster.setCalculator(c.calculator);\n      }\n    });\n  }\n}\n","import { Directive, EventEmitter, Input, OnChanges, OnDestroy, OnInit, Output, SimpleChange } from '@angular/core';\n\nimport { InfoWindowManager, MarkerManager } from '@agm/core';\nimport { ClusterManager } from '../services/managers/cluster-manager';\n\nimport { CalculateFunction, ClusterOptions, ClusterStyle } from '../services/google-clusterer-types';\n\nimport { Subscription } from 'rxjs';\n\n/**\n * AgmMarkerCluster clusters map marker if they are near together\n *\n * ### Example\n * ```typescript\n * import { Component } from '@angular/core';\n *\n * @Component({\n *  selector: 'my-map-cmp',\n *  styles: [`\n *    agm-map {\n *      height: 300px;\n *    }\n * `],\n *  template: `\n *    <agm-map [latitude]=\"lat\" [longitude]=\"lng\" [zoom]=\"zoom\">\n *      <agm-marker-cluster>\n *        <agm-marker [latitude]=\"lat\" [longitude]=\"lng\" [label]=\"'M'\">\n *        </agm-marker>\n *        <agm-marker [latitude]=\"lat2\" [longitude]=\"lng2\" [label]=\"'N'\">\n *        </agm-marker>\n *      </agm-marker-cluster>\n *    </agm-map>\n *  `\n * })\n * ```\n */\n@Directive({\n  selector: 'agm-marker-cluster',\n  providers: [\n    ClusterManager,\n    { provide: MarkerManager, useExisting: ClusterManager },\n    InfoWindowManager,\n  ],\n})\nexport class AgmMarkerCluster implements OnDestroy, OnChanges, OnInit, ClusterOptions {\n  /**\n   * The grid size of a cluster in pixels\n   */\n  @Input() gridSize: number;\n\n  /**\n   * The maximum zoom level that a marker can be part of a cluster.\n   */\n  @Input() maxZoom: number;\n\n  /**\n   * Whether the default behaviour of clicking on a cluster is to zoom into it.\n   */\n  @Input() zoomOnClick: boolean;\n\n  /**\n   * Whether the center of each cluster should be the average of all markers in the cluster.\n   */\n  @Input() averageCenter: boolean;\n\n  /**\n   * The minimum number of markers to be in a cluster before the markers are hidden and a count is shown.\n   */\n  @Input() minimumClusterSize: number;\n\n  /**\n   * An object that has style properties.\n   */\n  @Input() styles: ClusterStyle[];\n\n  /**\n   * A function that calculates the cluster style and text based on the markers in the cluster.\n   */\n  @Input() calculator: CalculateFunction;\n\n  @Input() imagePath: string;\n  @Input() imageExtension: string;\n\n  @Output() clusterClick: EventEmitter<void> = new EventEmitter<void>();\n\n  private _observableSubscriptions: Subscription[] = [];\n  constructor(private _clusterManager: ClusterManager) { }\n\n  /** @internal */\n  ngOnDestroy() {\n    this._clusterManager.clearMarkers();\n    this._observableSubscriptions.forEach((s) => s.unsubscribe());\n  }\n\n  /** @internal */\n  ngOnChanges(changes: { [key: string]: SimpleChange }) {\n    if (changes['gridSize']) {\n      this._clusterManager.setGridSize(this);\n    }\n    if (changes['maxZoom']) {\n      this._clusterManager.setMaxZoom(this);\n    }\n    if (changes['zoomOnClick']) {\n      this._clusterManager.setZoomOnClick(this);\n    }\n    if (changes['averageCenter']) {\n      this._clusterManager.setAverageCenter(this);\n    }\n    if (changes['minimumClusterSize']) {\n      this._clusterManager.setMinimumClusterSize(this);\n    }\n    if (changes['imagePath']) {\n      this._clusterManager.setImagePath(this);\n    }\n    if (changes['imageExtension']) {\n      this._clusterManager.setImageExtension(this);\n    }\n    if (changes['calculator']) {\n      this._clusterManager.setCalculator(this);\n    }\n    if (changes['styles']) {\n      this._clusterManager.setStyles(this);\n    }\n  }\n\n  private _addEventListeners() {\n    const handlers = [\n      {\n        name: 'clusterclick',\n        handler: () => this.clusterClick.emit(),\n      },\n    ];\n    handlers.forEach((obj) => {\n      const os = this._clusterManager.createClusterEventObservable(obj.name).subscribe(obj.handler);\n      this._observableSubscriptions.push(os);\n    });\n  }\n\n  /** @internal */\n  ngOnInit() {\n    this._addEventListeners();\n    this._clusterManager.init({\n      gridSize: this.gridSize,\n      maxZoom: this.maxZoom,\n      zoomOnClick: this.zoomOnClick,\n      averageCenter: this.averageCenter,\n      minimumClusterSize: this.minimumClusterSize,\n      styles: this.styles,\n      imagePath: this.imagePath,\n      imageExtension: this.imageExtension,\n      calculator: this.calculator,\n    });\n  }\n}\n","import { AgmCoreModule } from '@agm/core';\nimport { NgModule } from '@angular/core';\nimport { AgmMarkerCluster } from './directives/marker-cluster';\n\n@NgModule({\n  imports: [AgmCoreModule],\n  declarations: [AgmMarkerCluster],\n  exports: [AgmMarkerCluster],\n})\nexport class AgmJsMarkerClustererModule {\n}\n","// main modules\nexport * from './directives';\nexport * from './services';\n\n// we explicitly export the module here to prevent this Ionic 2 bug:\n// http://stevemichelotti.com/integrate-angular-2-google-maps-into-ionic-2/\nexport { AgmJsMarkerClustererModule } from './js-marker-clusterer.module';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"]}